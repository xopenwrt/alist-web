;(function(){var _excluded=["icon","children"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}System.register(['./index-legacy.5c7fb3bb.js','./index.esm-legacy.fe6c3c2e.js','./vendor-legacy.75b6488b.js','./useTitle-legacy.6343c09e.js'],function(exports,module){'use strict';var __vitePreload,GenIcon,admin,Overlay,FiMenu,DiGithubAlt,MdCached,changeToken,BsGearFill,MdStorage,FaDatabase,MdKeyboardArrowRight,useDisclosure,useTranslation,useRouteMatch,useHistory,useLocation,useToast,react,React,Box,useColorModeValue,Drawer,ModalOverlay,DrawerContent,Flex,IconButton,Link,Icon,Tooltip,Center,Spinner,Route,Link$1,Text,Collapse,useTitle;return{setters:[function(module){__vitePreload=module._;},function(module){GenIcon=module.G;admin=module.b;Overlay=module.O;FiMenu=module.y;DiGithubAlt=module.z;MdCached=module.A;changeToken=module.C;BsGearFill=module.E;MdStorage=module.H;FaDatabase=module.t;MdKeyboardArrowRight=module.J;},function(module){useDisclosure=module.k;useTranslation=module.j;useRouteMatch=module.a9;useHistory=module.o;useLocation=module.u;useToast=module.h;react=module.r;React=module.R;Box=module.n;useColorModeValue=module.l;Drawer=module.aa;ModalOverlay=module.X;DrawerContent=module.ab;Flex=module.F;IconButton=module.a2;Link=module.y;Icon=module.s;Tooltip=module.q;Center=module.C;Spinner=module.v;Route=module.b;Link$1=module.L;Text=module.E;Collapse=module.ac;},function(module){useTitle=module.u;}],execute:function execute(){exports('default',Swibc);// THIS FILE IS AUTO GENERATED
function SiMetabase(props){return GenIcon({"tag":"svg","attr":{"role":"img","viewBox":"0 0 24 24"},"child":[{"tag":"title","attr":{},"child":[]},{"tag":"path","attr":{"d":"M5.385 6.136c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-1.438 2.63c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.465-2.63c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.499-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm-1.088 5.592c.794 0 1.438-.654 1.438-1.461s-.644-1.461-1.438-1.461-1.438.654-1.438 1.461.643 1.461 1.438 1.461zm5.464-5.592c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111S11.4 7.247 12 7.247s1.088-.498 1.088-1.111zm.35-4.675c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461S11.206 0 12 0s1.438.654 1.438 1.461zm-.35 0C13.088.848 12.6.35 12 .35s-1.088.498-1.088 1.111S11.4 2.572 12 2.572s1.088-.498 1.088-1.111zm.35 8.806c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.499 1.088-1.111zm4.376-4.131c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939 1.461c.794 0 1.438-.654 1.438-1.461s-.644-1.461-1.438-1.461-1.438.654-1.438 1.461.644 1.461 1.438 1.461zm-4.027 1.209c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.643-1.461-1.438-1.461zm4.027 0c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zM3.947 12.857a1.45 1.45 0 0 0-1.438 1.461c0 .807.644 1.461 1.438 1.461s1.438-.654 1.438-1.461a1.45 1.45 0 0 0-1.438-1.461zm5.465 1.5c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.655 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zM12 12.896c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.464 1.461c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.655 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939-1.461c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zM3.947 16.948c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.465 1.5c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm4.376 0c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm.35 4.091c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111S11.4 23.65 12 23.65s1.088-.498 1.088-1.111zm4.376-4.091c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939-1.461c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461z"}}]})(props);}// THIS FILE IS AUTO GENERATED
function BiExit(props){return GenIcon({"tag":"svg","attr":{"viewBox":"0 0 24 24"},"child":[{"tag":"path","attr":{"d":"M19.002 3h-14c-1.103 0-2 .897-2 2v4h2V5h14v14h-14v-4h-2v4c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V5c0-1.103-.898-2-2-2z"}},{"tag":"path","attr":{"d":"m11 16 5-4-5-4v3.001H3v2h8z"}}]})(props);}var Login=react.exports.lazy(function(){return __vitePreload(function(){return module.import((window.__dynamicImportHandler__||function(importer){return importer;})('./login-legacy.bd26fb76.js'));},false?"__VITE_PRELOAD__":void 0);});var Settings=react.exports.lazy(function(){return __vitePreload(function(){return module.import((window.__dynamicImportHandler__||function(importer){return importer;})('./settings-legacy.0d927d2e.js'));},false?"__VITE_PRELOAD__":void 0);});var Accounts=react.exports.lazy(function(){return __vitePreload(function(){return module.import((window.__dynamicImportHandler__||function(importer){return importer;})('./accounts-legacy.43646774.js'));},false?"__VITE_PRELOAD__":void 0);});var Metas=react.exports.lazy(function(){return __vitePreload(function(){return module.import((window.__dynamicImportHandler__||function(importer){return importer;})('./metas-legacy.a2853c00.js'));},false?"__VITE_PRELOAD__":void 0);});var NavItems=[{name:"Settings",to:"settings",icon:BsGearFill,children:[{name:"Frontend",to:"settings/0",component:Settings},{name:"Backend",to:"settings/1",component:Settings}]},{name:"Accounts",to:"accounts",icon:MdStorage,component:Accounts},{name:"Meta",to:"meta",icon:SiMetabase,component:Metas},{name:"Backup & Restore",to:"backup-restore",icon:FaDatabase,component:react.exports.lazy(function(){return __vitePreload(function(){return module.import((window.__dynamicImportHandler__||function(importer){return importer;})('./backup-restore-legacy.365d67ed.js'));},false?"__VITE_PRELOAD__":void 0);})}];var getAllNavItems=function getAllNavItems(items){var acc=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];items.forEach(function(item){acc.push(item);if(item.children){getAllNavItems(item.children,acc);}});return acc;};function Swibc(){var disclosureSet={};var _iterator=_createForOfIteratorHelper(NavItems),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item.children){disclosureSet[item.name]=useDisclosure();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var sidebar=useDisclosure();var _useTranslation=useTranslation(),t=_useTranslation.t;var match=useRouteMatch();var history=useHistory();var location=useLocation();var toast=useToast();useTitle(t("Alist Manage"));react.exports.useEffect(function(){admin.post("login").then(function(resp){var res=resp.data;var url=match.url;if(!url.endsWith("/")){url=url+"/";}if(res.code===401){history.push("".concat(url,"login"));}else{if(match.url===location.pathname){history.push("".concat(url,"settings/0"));}}});},[location.pathname]);var NavItem=function NavItem(props){var icon=props.icon,children=props.children,rest=_objectWithoutProperties(props,_excluded);var MyLink=props.to?Link$1:Box;return/* @__PURE__ */React.createElement(MyLink,{to:"".concat(match.url,"/").concat(props.to),onClick:function onClick(){if(props.to){document.title="".concat(children," - ").concat(t("Alist Manage"));sidebar.onClose();}}},/* @__PURE__ */React.createElement(Flex,_objectSpread({align:"center",px:"4",pl:"8",py:"3",cursor:"pointer",color:useColorModeValue("inherit","gray.400"),_hover:{bg:useColorModeValue("gray.100","gray.900"),color:useColorModeValue("gray.900","gray.200")},role:"group",fontWeight:"semibold",transition:".15s ease"},rest),icon&&/* @__PURE__ */React.createElement(Icon,{mr:"2",boxSize:"4",_groupHover:{color:useColorModeValue("gray.600","gray.300")},as:icon}),children));};var SidebarContent=function SidebarContent(props){return/* @__PURE__ */React.createElement(Box,_objectSpread({as:"nav",pos:"fixed",top:"0",left:"0",zIndex:"sticky",h:"full",pb:"10",overflowX:"hidden",overflowY:"auto",bg:useColorModeValue("white","gray.800"),borderColor:useColorModeValue("inherit","gray.700"),borderRightWidth:"1px",w:"48",shadow:"md"},props),/* @__PURE__ */React.createElement(Link$1,{to:"/@manage"},/* @__PURE__ */React.createElement(Flex,{px:"4",py:"5",align:"center"},/* @__PURE__ */React.createElement(Text,{fontSize:"2xl",ml:"2",color:useColorModeValue("brand.500","white"),fontWeight:"semibold"},"Alist ",t("Manage")))),/* @__PURE__ */React.createElement(Flex,{direction:"column",as:"nav",fontSize:"sm",color:"gray.600","aria-label":"Main Navigation"},NavItems.map(function(item){if(!item.children){return/* @__PURE__ */React.createElement(NavItem,{to:item.to,icon:item.icon,key:item.name},t(item.name));}else{return/* @__PURE__ */React.createElement(Box,{key:item.name},/* @__PURE__ */React.createElement(NavItem,{icon:item.icon,onClick:disclosureSet[item.name].onToggle},t(item.name),/* @__PURE__ */React.createElement(Icon,{as:MdKeyboardArrowRight,ml:"auto",transform:disclosureSet[item.name].isOpen?"rotate(90deg)":""})),/* @__PURE__ */React.createElement(Collapse,{in:disclosureSet[item.name].isOpen},item.children.map(function(child){return/* @__PURE__ */React.createElement(NavItem,{pl:"12",py:"2",to:child.to,icon:child.icon,key:child.name},t(child.name));})));}})));};return/* @__PURE__ */React.createElement(Box,{as:"section",bg:useColorModeValue("gray.50","gray.700"),minH:"100vh"},/* @__PURE__ */React.createElement(Overlay,null),/* @__PURE__ */React.createElement(SidebarContent,{display:{base:"none",md:"unset"}}),/* @__PURE__ */React.createElement(Drawer,{isOpen:sidebar.isOpen,onClose:sidebar.onClose,placement:"left"},/* @__PURE__ */React.createElement(ModalOverlay,null),/* @__PURE__ */React.createElement(DrawerContent,null,/* @__PURE__ */React.createElement(SidebarContent,{w:"full",borderRight:"none"}))),/* @__PURE__ */React.createElement(Box,{ml:{base:0,md:48},transition:".3s ease"},/* @__PURE__ */React.createElement(Flex,{as:"header",align:"center",justify:"space-between",w:"full",px:"4",bg:useColorModeValue("white","gray.800"),borderBottomWidth:"1px",borderColor:useColorModeValue("inherit","gray.700"),h:"14",shadow:"md"},/* @__PURE__ */React.createElement(IconButton,{"aria-label":"Menu",display:{base:"inline-flex",md:"none"},onClick:sidebar.onOpen,icon:/* @__PURE__ */React.createElement(FiMenu,null),size:"sm"}),/* @__PURE__ */React.createElement(Box,{w:"96",display:{base:"none",md:"flex"}}),/* @__PURE__ */React.createElement(Flex,{align:"center"},/* @__PURE__ */React.createElement(Link,{href:"https://github.com/Xhofe/alist",isExternal:true},/* @__PURE__ */React.createElement(Icon,{boxSize:6,color:"gray.500",as:DiGithubAlt,cursor:"pointer"})),/* @__PURE__ */React.createElement(Tooltip,{shouldWrapChildren:true,hasArrow:true,placement:"bottom",label:t("clear buffer")},/* @__PURE__ */React.createElement(IconButton,{colorScheme:"whiteAlpha","aria-label":t("clear buffer"),icon:/* @__PURE__ */React.createElement(Icon,{boxSize:6,color:"gray.500",as:MdCached}),onClick:function onClick(){admin.get("clear_cache").then(function(resp){var res=resp.data;if(res.code===200){toast({title:t(res.message),status:"success",duration:3e3,isClosable:true});}else{toast({title:t(res.message),status:"error",duration:3e3,isClosable:true});}});}})),/* @__PURE__ */React.createElement(Tooltip,{shouldWrapChildren:true,hasArrow:true,placement:"bottom",label:t("logout")},/* @__PURE__ */React.createElement(IconButton,{onClick:function onClick(){changeToken("");history.push("".concat(match.url,"/login"));},colorScheme:"blank","aria-label":t("logout"),icon:/* @__PURE__ */React.createElement(Icon,{boxSize:6,color:"gray.500",as:BiExit})})))),/* @__PURE__ */React.createElement(Box,{as:"main",p:"2"},/* @__PURE__ */React.createElement(Box,{borderWidth:"1px",borderStyle:"dashed",rounded:"md",h:"calc( 100vh - 80px)",overflowY:"auto",p:"2"},/* @__PURE__ */React.createElement(react.exports.Suspense,{fallback:/* @__PURE__ */React.createElement(Center,{h:"full"},/* @__PURE__ */React.createElement(Spinner,null))},getAllNavItems(NavItems).map(function(item){return item.component&&/* @__PURE__ */React.createElement(Route,{path:"".concat(match.url,"/").concat(item.to),key:item.name},/* @__PURE__ */React.createElement(item.component,null));}),/* @__PURE__ */React.createElement(Route,{path:"".concat(match.url,"/login")},/* @__PURE__ */React.createElement(Login,null)))))));}}};});})();
